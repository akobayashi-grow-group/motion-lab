<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ç”»é¢å†…ã«å…¥ã£ãŸã‚‰å‡ºç¾ï¼ˆGSAPï¼‰</title>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <style>
    @import url('https://unpkg.com/destyle.css@4.0.1/destyle.min.css') layer(destyle);
    @import url('../assets/css/common.css') layer(common);

    @layer destyle, common, base, demo;


    @layer demo {


      .container {
        padding: 1rem;
        max-width: 800px;
        margin: 0 auto;
      }

      .elements {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1rem;
      }


      .element {
        padding: 2rem;
        margin-bottom: 1.5rem;
        background-color: #ccc;
        border-radius: 0.5rem;
        text-align: center;
        font-weight: 500;
      }

      /* ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
      #code-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 1000;
        max-width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        display: none;
      }

      #code-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        display: none;
      }

      #code-modal h3 {
        margin-bottom: 10px;
        font-weight: bold;
      }

      #code-modal pre {
        background: #f5f5f5;
        padding: 15px;
        border-radius: 4px;
        overflow-x: auto;
        font-family: monospace;
        white-space: pre-wrap;
        margin: 10px 0;
      }

      .modal-button-container {
        display: flex;
        justify-content: flex-end;
        margin-top: 15px;
      }

      .modal-copy-button {
        background: #4285f4;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 8px;
      }

      .modal-close-button {
        background: #888;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }

      @media screen and (min-width: 1400px) {
        .tp-dfwv {
          zoom:1.2
        }


      }
    }

    @layer base {
      .spacer {
        height: 100vh;
      }

      .spacer-half {
        height: 50vh;
      }
    }
  </style>
</head>

<body>
<div class="container">
  <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç”¨ã®ã‚¹ãƒšãƒ¼ã‚µãƒ¼ã‚’è¿½åŠ  -->
  <p>å³å´ã®æ“ä½œUIã§å‡ºç¾ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èª¿æ•´ã§ãã¾ã™</p>
  <div class="spacer-half"></div>

  <p>è¦ç´ ãŒå‡ºç¾ã™ã‚‹ã¾ã§ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ãã ã•ã„</p>
  <div class="spacer-half"></div>

  <h1>ã“ã®ä¸‹ã«è¦ç´ ãŒå‡ºç¾ã—ã¾ã™</h1>
  <div class="elements">
    <div class="element js-fadein">è¨­å®šå€¤ã«åˆã‚ã›ã¦å‡ºç¾</div>
    <div class="element js-fadein">è¨­å®šå€¤ã«åˆã‚ã›ã¦å‡ºç¾</div>
    <div class="element js-fadein">è¨­å®šå€¤ã«åˆã‚ã›ã¦å‡ºç¾</div>
    <div class="element js-fadein">è¨­å®šå€¤ã«åˆã‚ã›ã¦å‡ºç¾</div>
    <div class="element js-fadein">è¨­å®šå€¤ã«åˆã‚ã›ã¦å‡ºç¾</div>
    <div class="element js-fadein">è¨­å®šå€¤ã«åˆã‚ã›ã¦å‡ºç¾</div>
  </div>

  <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç”¨ã®ã‚¹ãƒšãƒ¼ã‚µãƒ¼ã‚’è¿½åŠ  -->
  <div class="spacer-half"></div>
</div>

<!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®æ§‹é€  -->
<div id="code-modal-overlay"></div>
<div id="code-modal">
  <h3>GSAPã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰</h3>
  <pre></pre>
  <div class="modal-button-container">
    <button class="modal-copy-button">ã‚³ãƒ”ãƒ¼</button>
    <button class="modal-close-button">é–‰ã˜ã‚‹</button>
  </div>
</div>

<script src="../assets/js/utils.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/ScrollTrigger.min.js"></script>

<script type="module">
  import {Pane} from 'https://cdn.jsdelivr.net/npm/tweakpane@4.0.5/dist/tweakpane.min.js';

  document.addEventListener('DOMContentLoaded', () => {
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šï¼ˆTweakpaneã§åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ä¿æŒï¼‰
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
    const defaultSettings = {
      from: {
        opacity: 0,
        x: 0,
        y: 50,
        scale: 1,
        rotation: 0,
        ease: 'power2.out',
        duration: 0.8,
        mask: 'unset'
      },
      to: {
        opacity: 1,
        mask: 'inset(0% 0% 0% 0%)'
      },
      scrollTrigger: {
        start: 'top 80%',
        // end: 'bottom bottom',
        toggleActions: 'play none none none'
      }
    };

    // ===== Tweakpaneã®è¨­å®š =====
    const pane = new Pane({
      container: document.getElementById('tweakpane-container')
    });

    //position:fixed
    pane.containerElem_.style.position = 'fixed';

    // ãƒ•ã‚©ãƒ«ãƒ€ä½œæˆã‚’æ•´ç†
    const folders = {
      from: pane.addFolder({title: 'Fromè¨­å®š'}),
      duration: pane.addFolder({title: 'é€Ÿåº¦è¨­å®š'}),
      scrollTrigger: pane.addFolder({title: 'ScrollTriggerè¨­å®š'}),
      apply: pane.addFolder({title: '[åæ˜ ]ã‚¯ãƒªãƒƒã‚¯ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¤‰åŒ–ã—ã¾ã™'})
    };

    // Fromè¨­å®šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    folders.from.addBinding(defaultSettings.from, 'opacity', {min: 0, max: 1, step: 0.2});
    folders.from.addBinding(defaultSettings.from, 'x', {min: -200, max: 200, step: 2});
    folders.from.addBinding(defaultSettings.from, 'y', {min: -200, max: 200, step: 2});
    folders.from.addBinding(defaultSettings.from, 'scale', {min: 0, max: 2, step: 0.2});
    folders.from.addBinding(defaultSettings.from, 'rotation', {min: -180, max: 180, step: 2});

    folders.from.addBinding(defaultSettings.from, 'mask', {
      options: {
        'ãªã—': 'unset',
        'å·¦ã‹ã‚‰': 'inset(0 100% 0 0)',
        'å³ã‹ã‚‰': 'inset(0 0 0 100%)',
        'ä¸‹ã‹ã‚‰': 'inset(100% 0 0 0)',
        'ä¸Šã‹ã‚‰': 'inset(0 0 100% 0)'
      }
    });

    // é€Ÿåº¦è¨­å®šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    folders.duration.addBinding(defaultSettings.from, 'duration', {min: 0, max: 3, step: 0.1});
    folders.duration.addBinding(defaultSettings.from, 'ease', {
      options: {
        'â–¼ é–‹å§‹ãŒã‚†ã‚‹ã‚„ã‹ â–¼': null,  // ã“ã‚Œã¯é¸æŠã§ããªã„ã‚¿ã‚¤ãƒˆãƒ«
        'ã‚†ã£ãã‚Šå§‹ã¾ã‚‹ï¼ˆsine.inï¼‰': 'sine.in',
        'ãªã‚ã‚‰ã‹ã«åŠ é€Ÿï¼ˆpower2.inï¼‰': 'power2.in',
        'ã‚ˆã‚Šå¼·ãåŠ é€Ÿï¼ˆpower4.inï¼‰': 'power4.in',
        'ç·©ã‚„ã‹ã«å§‹ã¾ã‚Šæ€¥åŠ é€Ÿï¼ˆcirc.inï¼‰': 'circ.in',
        'éå¸¸ã«ç·©ã‚„ã‹ã«å§‹ã¾ã‚Šæ€¥åŠ é€Ÿï¼ˆexpo.inï¼‰': 'expo.in',

        'â–¼ çµ‚ã‚ã‚ŠãŒã‚†ã‚‹ã‚„ã‹ â–¼': null,  // ã“ã‚Œã¯é¸æŠã§ããªã„ã‚¿ã‚¤ãƒˆãƒ«
        'ãªã‚ã‚‰ã‹ã«æ¸›é€Ÿï¼ˆsine.outï¼‰': 'sine.out',
        'ãªã‚ã‚‰ã‹ã«æ¸›é€Ÿï¼ˆpower2.outï¼‰': 'power2.out',
        'ã‚ˆã‚Šå¼·ã„æ¸›é€Ÿï¼ˆpower4.outï¼‰': 'power4.out',
        'æ€¥æ¿€ãªæ¸›é€Ÿå¾Œã«ç·©ã‚„ã‹ï¼ˆcirc.outï¼‰': 'circ.out',
        'æ€¥æ¿€ãªæ¸›é€Ÿï¼ˆexpo.outï¼‰': 'expo.out',
        'å°‘ã—è·³ã­è¿”ã‚Šï¼ˆback.outï¼‰': 'back.out',
        'å¼¾åŠ›ã®ã‚ã‚‹è·³ã­è¿”ã‚Šï¼ˆelastic.outï¼‰': 'elastic.out',
        'ãƒã‚¦ãƒ³ãƒ‰ï¼ˆbounce.outï¼‰': 'bounce.out',

        'â–¼ ä¸¡ç«¯ãŒæ»‘ã‚‰ã‹ â–¼': null,  // ã“ã‚Œã¯é¸æŠã§ããªã„ã‚¿ã‚¤ãƒˆãƒ«
        'ä¸¡ç«¯ãŒæ»‘ã‚‰ã‹ï¼ˆsine.inOutï¼‰': 'sine.inOut',
        'ä¸¡ç«¯ãŒæ»‘ã‚‰ã‹ï¼ˆpower2.inOutï¼‰': 'power2.inOut',
        'ã‚ˆã‚Šå¼·ã„åŠ æ¸›é€Ÿï¼ˆpower4.inOutï¼‰': 'power4.inOut',
        'å††é‹å‹•ã®ã‚ˆã†ãªåŠ æ¸›é€Ÿï¼ˆcirc.inOutï¼‰': 'circ.inOut',
        'ä¸¡ç«¯ãŒæ€¥æ¿€ï¼ˆexpo.inOutï¼‰': 'expo.inOut',
      }
    });

    // ScrollTriggerè¨­å®šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    folders.scrollTrigger.addBinding(defaultSettings.scrollTrigger, 'start', {
      options: {
        'è¦ç´ ã®ä¸Šç«¯ãŒç”»é¢ã®ä¸‹ç«¯': 'top bottom',
        'è¦ç´ ã®ä¸Šç«¯ãŒç”»é¢ã®ä¸‹ç«¯ã‹ã‚‰20%': 'top 80%',
      }
    });

    folders.scrollTrigger.addBinding(defaultSettings.scrollTrigger, 'toggleActions', {
      options: {
        'ï¼‘å›ã ã‘å†ç”Ÿ': 'play none none none',
        'ä¸Šæ–¹å‘ã«æˆ»ã£ãŸã‚‰æ¶ˆãˆã‚‹': 'play none none reverse',
      }
    });

    // ãƒœã‚¿ãƒ³è¨­å®š
    const applyButton = folders.apply.addButton({
      title: 'åæ˜ ',
      label: 'è¨­å®šã‚’é©ç”¨'
    });

    //applyFolderã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´
    folders.apply.element.style.backgroundColor = 'blue';

    // GSAPã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¿æŒã™ã‚‹é…åˆ—
    let animations = [];
    let scrollTriggers = [];

    // ===== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•° =====

    // è¨­å®šã‹ã‚‰nullãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é™¤å»ã™ã‚‹é–¢æ•°
    function cleanProps(props) {
      const cleaned = {};
      Object.entries(props).forEach(([key, value]) => {
        if (value !== null && value !== undefined && value !== 'unset') {
          cleaned[key] = value;
        }
      });
      return cleaned;
    }

    // ===== GSAPã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£ =====

    // GSAPã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–é–¢æ•°
    function initGSAP() {
      // æ—¢å­˜ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒˆãƒªã‚¬ãƒ¼ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
      animations.forEach(anim => anim.kill());
      scrollTriggers.forEach(st => st.kill());
      animations = [];
      scrollTriggers = [];

      // GSAPã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–
      document.querySelectorAll('.js-fadein').forEach(element => {
        // fromãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æº–å‚™
        const fromProps = {
          opacity: defaultSettings.from.opacity,
          x: defaultSettings.from.x,
          y: defaultSettings.from.y,
          scale: defaultSettings.from.scale,
          rotation: defaultSettings.from.rotation
        };

        // maskãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿clipPathã‚’è¿½åŠ 
        if (defaultSettings.from.mask !== 'unset') {
          fromProps.clipPath = defaultSettings.from.mask;
        }

        // toãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æº–å‚™
        const toProps = {
          opacity: defaultSettings.to.opacity,
          x: 0,
          y: 0,
          scale: 1,
          rotation: 0,
          duration: defaultSettings.from.duration,
          ease: defaultSettings.from.ease
        };

        // maskãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿clipPathã‚’è¿½åŠ 
        if (defaultSettings.to.mask !== 'unset') {
          toProps.clipPath = defaultSettings.to.mask;
        }

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒˆãƒªã‚¬ãƒ¼è¨­å®š
        const scrollTriggerConfig = {
          trigger: element,
          start: defaultSettings.scrollTrigger.start,
          toggleActions: defaultSettings.scrollTrigger.toggleActions,
          markers: {
            startColor: "green",
            endColor: "transparent",
            fontSize: "12px",
            indent: 10
          }
        };

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
        const tl = gsap.timeline({ scrollTrigger: scrollTriggerConfig });
        tl.fromTo(element, cleanProps(fromProps), cleanProps(toProps));

        // å‚ç…§ã‚’ä¿æŒ
        animations.push(tl);
        scrollTriggers.push(tl.scrollTrigger);
      });
    }

    // ===== ã‚³ãƒ¼ãƒ‰ç”Ÿæˆé–¢é€£ =====

    // fromToãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ
    function generateFromToTemplate(fromProps, toProps, animationProps) {
      return `// GSAPã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®šï¼ˆfromToï¼‰
gsap.utils.toArray('.js-fadein').forEach(element => {
  gsap.fromTo(element,
    {
      ${fromProps.join(',\n      ')}
    },
    {
      ${toProps.join(',\n      ')},
      ${animationProps.join(',\n      ')}
    }
  );
});`;
    }

    // fromãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ
    function generateFromTemplate(fromProps, animationProps) {
      return `// GSAPã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®šï¼ˆfromï¼‰
gsap.utils.toArray('.js-fadein').forEach(element => {
  gsap.from(element, {
    ${fromProps.join(',\n    ')},
    ${animationProps.join(',\n    ')}
  });
});`;
    }

    // GSAP + ScrollTriggerã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
    function generateGSAPCode(settings) {
      // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¨®é¡ã‚’åˆ¤æ–­
      const needsFromTo =
        (settings.from.mask !== 'unset' && settings.to.mask !== 'unset') ||
        (settings.to.opacity !== 1 && settings.to.opacity !== settings.from.opacity);

      // fromã®å€¤ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”¨ã®æ–‡å­—åˆ—ã‚’ç”Ÿæˆ
      const fromProps = [];
      if (settings.from.opacity !== 1) fromProps.push(`opacity: ${parseFloat(Number(settings.from.opacity).toFixed(1))}`);
      if (settings.from.x !== 0) fromProps.push(`x: ${settings.from.x}`);
      if (settings.from.y !== 0) fromProps.push(`y: ${settings.from.y}`);
      if (settings.from.scale !== 1) fromProps.push(`scale: ${parseFloat(Number(settings.from.scale).toFixed(1))}`);
      if (settings.from.rotation !== 0) fromProps.push(`rotation: ${settings.from.rotation}`);
      if (settings.from.mask !== 'unset' && settings.from.mask !== undefined) {
        fromProps.push(`clipPath: "${settings.from.mask}"`);
      }

      // toã®å€¤ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”¨ã®æ–‡å­—åˆ—ã‚’ç”Ÿæˆï¼ˆfromToã®å ´åˆã®ã¿ï¼‰
      const toProps = [];
      if (needsFromTo) {
        toProps.push(`opacity: ${parseFloat(Number(settings.to.opacity).toFixed(1))}`);
        if (settings.to.mask !== 'unset' && settings.to.mask !== undefined) {
          toProps.push(`clipPath: "${settings.to.mask}"`);
        }
      }

      // ScrollTriggerè¨­å®š
      const scrollTriggerProps = [];
      scrollTriggerProps.push(`trigger: element`);
      scrollTriggerProps.push(`start: "${settings.scrollTrigger.start}"`);
      if (settings.scrollTrigger.end) {
        scrollTriggerProps.push(`end: "${settings.scrollTrigger.end}"`);
      }
      scrollTriggerProps.push(`toggleActions: "${settings.scrollTrigger.toggleActions}"`);
      scrollTriggerProps.push(`//markers: true`);

      // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å…±é€šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
      const animationProps = [];
      animationProps.push(`duration: ${parseFloat(Number(settings.from.duration).toFixed(1))}`);
      animationProps.push(`ease: "${settings.from.ease}"`);

      // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒˆãƒªã‚¬ãƒ¼è¨­å®šã‚’è¿½åŠ 
      animationProps.push(`scrollTrigger: {
        //yè»¸ç§»å‹•ãŒã‚ã‚‹ã¨ãã¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã•ã›ã‚‹è¦ç´ ã¨ã€ScrollTriggerã®triggerã¯åˆ¥ã«ã—ãŸæ–¹ãŒã„ã„ã§ã™
        ${scrollTriggerProps.join(',\n        ')}
      }`);

      // é©åˆ‡ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã—ã¦è¿”ã™
      return needsFromTo
        ? generateFromToTemplate(fromProps, toProps, animationProps)
        : generateFromTemplate(fromProps, animationProps);
    }

    // ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã¨è¡¨ç¤ºã‚’è¡Œã†é–¢æ•°
    function generateAndShowCode(settings) {
      showCodeModal(generateGSAPCode(settings));
    }

    // ===== ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ =====

    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    function showCodeModal(codeText) {
      // æ—¢å­˜ã®ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ ã‚’å–å¾—
      const modal = document.getElementById('code-modal');
      const overlay = document.getElementById('code-modal-overlay');
      const pre = modal.querySelector('pre');
      const copyButton = modal.querySelector('.modal-copy-button');
      const closeButton = modal.querySelector('.modal-close-button');

      // ã‚³ãƒ¼ãƒ‰ã‚’preè¦ç´ ã«è¨­å®š
      pre.textContent = codeText;

      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹å…±é€šé–¢æ•°
      const closeModal = () => {
        modal.style.display = 'none';
        overlay.style.display = 'none';
      };

      // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
      copyButton.onclick = () => {
        navigator.clipboard.writeText(codeText);
        copyButton.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ!';
        setTimeout(() => {
          copyButton.textContent = 'ã‚³ãƒ”ãƒ¼';
        }, 2000);
      };

      // é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
      closeButton.onclick = closeModal;
      overlay.onclick = closeModal;

      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’è¡¨ç¤º
      modal.style.display = 'block';
      overlay.style.display = 'block';
      
      // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å½“ã¦ã‚‹
      setTimeout(() => {
        copyButton.focus();
      }, 10);
    }

    // ===== ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ =====

    // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«GSAPã‚’å†åˆæœŸåŒ–
    applyButton.on('click', initGSAP);

    // ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒœã‚¿ãƒ³
    folders.apply.addButton({
      title: 'ğŸ“‹ ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ'
    }).on('click', () => generateAndShowCode(defaultSettings));

    // åˆå›ã®GSAPã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
    initGSAP();

  });
</script>
</body>

</html>